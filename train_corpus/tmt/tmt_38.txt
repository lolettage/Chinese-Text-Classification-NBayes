一种集群文件系统及其文件锁分配方法 本发明公开了一种集群文件系统及其文件锁分配方法，包括：代理模块从文件锁模块获取对于一个文件的文件锁并接收来自多个业务客户端对该文件的多个第一加锁请求；将所述多个第一加锁请求依时序建立等待队列，按所述等待队列顺序依次响应所述多个第一加锁请求，将所述文件锁分配给相应的业务客户端持有；当所有业务客户端均不再持有所述文件锁且所述等待队列为空并在后续的预设时长内没有接收到新的第一加锁请求时，将所述文件锁释放；在代理模块未持有文件锁的状态下，文件锁模块接收来自修复客户端的第二加锁请求，并将文件锁分配给修复客户端持有；本发明使数据修复时不影响前端业务，保证前端业务性能，充分复用利用硬件资源，降低用户成本。
分布式存储的磁盘分配方法及装置 本发明公开了一种分布式存储的磁盘分配方法及装置。其中该方法包括以下步骤：根据所包含的未分配磁盘的数量的多少对集群中的各存储节点进行排序，得到第一排序结果；根据第一排序结果按顺序从每个存储节点中选取一个未分配磁盘，并记录选取未分配磁盘时包含未分配磁盘的存储节点的数量作为磁盘冗余度允许值，循环执行，直至将集群中所有未分配磁盘构成未分配磁盘序列；根据预设冗余度查找未分配磁盘序列中磁盘冗余度允许值满足要求的磁盘，并按顺序选取磁盘构成存储池。其能够保证所创建的存储池中同一组内的磁盘及磁盘镜像最大可能的分布于不同存储节点。且可在每次构建存储池通过预先设定冗余度构建合适的存储池，磁盘的分配更加灵活。
NAS集群系统的文件数据的处理方法及NAS集群系统 本发明公开了一种NAS集群系统的文件数据的处理方法及NAS集群系统，其中方法包括：在客户机需要执行创建文件之前，利用HASH算法确定对应的存储设备；分析客户机对应的多个存储设备的存储信息，在确定文件存储空间需求得到满足的条件下，按照优先存储设备顺序为客户机对应的本地存储设备、文件HASH值确定对应的存储设备、集群存储设备列表中存储设备，将文件创建在相应的存储设备上。通过使用这种存储设备的选取策略，因尽量使用本地存储的方式，避免了读写时网络资源的占用，同时更便于文件的查找。本发明提供的NAS集群系统的文件数据的处理方法及NAS集群系统，减少了通过网络传输的数据流量，减轻了网络负载，提高了NAS集群系统I/O处理效率。
纠删码集群文件系统提高顺序写效率的处理方法及装置 本发明公开了一种纠删码集群文件系统提高顺序写效率的处理方法和装置，该方法包括：在纠删码集群文件系统顺序写遇到用户数据未满条带时，将用户数据中的满条带的部分数据下发到写操作处理模块，将未满条带的部分数据缓存下来，与下一次的用户数据进行拼接，如满足拼接条件且拼接起来的数据满足一个条带的整数倍，则将拼接后的满条带数据下发到写操作处理；如满足拼接条件但拼接后的数据不满足条带尾，则将拼接后的满条带的部分数据下发到写操作处理模块，将拼接后的不满足条带尾的部分数据继续缓存下来。
一种基于glusterfs集群文件系统的纠删组内扩容的方法 本发明公开了一种基于glusterfs集群文件系统的纠删组内扩容的方法，包括：修改glusterfs管理代码，在glusterfs管理系统增加volume内部纠删组关系索引，允许volume内存在不同类型的纠删组；允许存储介质被多个进程管理，当存储介质格式化挂载后，在挂载点内创建多个子目录，并将所述子目录组成纠删组。突破gluster自身的架构限制，允许同一volume中存在不同类型的纠删组。实现glusterfsd进程与存储介质多对一，突破原glsuterfs进程和存储介质一对一的关系，使架构更灵活。充分利用glusterfs自带的功能实现纠删组扩容，对原代码改动较小，更容易实现。
实现虚拟机镜像文件热迁移的方法和NAS集群系统 本发明提供一种实现虚拟机镜像文件热迁移的方法和NAS集群系统，其中方法包括：检测NAS集群系统中的每个物理主机节点，在检测处理每个物理主机节点时，实时判断当前物理主机上运行的虚拟机的镜像文件是否存储在当前物理主机的本地存储设备上；若判断结果为否，则在虚拟机和当前物理主机的存储设备均满足预设的条件时，将需要迁移的虚拟机镜像文件从源物理主机迁移至当前物理主机的本地存储设备上。本发明提供的实现虚拟机镜像文件热迁移的方法和NAS集群系统，提高了虚拟机对相应的虚拟机镜像文件中所包含的应用文件和操作系统文件的I/O处理效率，并保障了集群系统网络运行的稳定性。
